
##################################################
#                                                #
# DO NOT EDIT THIS FILE MANUALLY                 #
# AUTOMATICALLY CREATED WITH docker-builder.sh   #
#                                                #
##################################################
  

FROM whatwedo/base:latest
RUN apt-get update -y && \
apt-get update && apt-get install --no-install-recommends -y \
ca-certificates \
curl \
mercurial \
git-core
RUN mkdir /tmp/go && \
cd /tmp/go && \
curl -L --progress https://storage.googleapis.com/golang/go1.6.2.linux-amd64.tar.gz -o go.tar.gz && \
echo 'b8318b09de06076d5397e6ec18ebef3b45cd315d  go.tar.gz' | shasum -c - && \
tar -C /usr/local -xzf go.tar.gz
ENV GOPATH /go
ENV GOROOT /usr/local/go
ENV PATH $PATH:/usr/local/go/bin:/go/bin
RUN apt-get install -y build-essential libssl-dev libcurl4-gnutls-dev libexpat1-dev gettext && \
mkdir /tmp/git && \
cd /tmp/git && \
curl -L --progress https://github.com/git/git/archive/v2.9.0.tar.gz -o git.tar.gz && \
echo '382d0446b4fdbd9e6fd1e474e535937e8d5446b5  git.tar.gz' | shasum -c - && \
tar xzf git.tar.gz && \
cd /tmp/git/git-* && \
make prefix=/usr all && \
make prefix=/usr install
RUN apt-get purge -y libssl-dev libcurl4-gnutls-dev libexpat1-dev && \
git clone git://github.com/elasticsearch/logstash-forwarder.git /opt/logstash-forwarder && \
cd /opt/logstash-forwarder && go build
COPY files/supervisord/logstash-forwarder.conf /etc/supervisor/conf.d/logstash-forwarder.conf
RUN apt-get autoremove -y && \
apt-get clean -y && \
rm -rf /var/lib/apt/lists/* /tmp/* /var/tmp/*
LABEL ch.whatwedo.image.base="whatwedo/logstash-forwarder"
